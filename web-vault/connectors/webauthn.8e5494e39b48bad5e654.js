!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1319)}({1319:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(165),a=n(433);n(434);var o,i="bitwarden://webauthn-callback",c=!1,u=null,d=null,l=null,s=null,f=null,p=!1,g=!1,b=!1,y=null;function m(){c||((s=r.getQsParam("parent"))?(s=decodeURIComponent(s),f=new URL(s).origin,"1"===r.getQsParam("v")?function(){var e=r.getQsParam("data");if(!e)return void w("No data.");o=r.b64Decode(e),u=r.getQsParam("headerText"),d=r.getQsParam("btnText"),l=r.getQsParam("btnReturnText")}():function(){var e=null;try{e=JSON.parse(r.b64Decode(r.getQsParam("data")))}catch(t){return void w("Cannot parse data.")}p=null!=e.callbackUri||!0===e.mobile,o=e.data,u=e.headerText,d=e.btnText,l=e.btnReturnText}(),c=!0):w("No parent."))}function v(){if(b=!1,"credentials"in navigator)if(m(),o){try{y=a.parseWebauthnJson(o)}catch(e){return void w("Cannot parse webauthn data.")}g=!1,p||-1!==navigator.userAgent.indexOf(" Safari/")&&-1===navigator.userAgent.indexOf("Chrome")||h()}else w("No data.");else w("WebAuthn is not supported in this browser.")}function h(){g||navigator.credentials.get({publicKey:y}).then(U).catch(w)}function w(e){p?(document.location.replace(i+"?error="+encodeURIComponent(e)),x(i+"?error="+encodeURIComponent(e))):parent.postMessage("error|"+e,s)}function U(e){if(!b){var t=a.buildDataString(e);p?(document.location.replace(i+"?data="+encodeURIComponent(t)),x(i+"?data="+encodeURIComponent(t))):(parent.postMessage("success|"+t,s),b=!0)}}function x(e){var t=document.getElementById("webauthn-button");t.innerText=decodeURI(l),t.onclick=function(){document.location.replace(e)}}document.addEventListener("DOMContentLoaded",(function(){var e;(v(),window.addEventListener("message",(function(e){e.origin&&""!==e.origin&&e.origin===f&&("stop"===e.data?g=!0:"start"===e.data&&g&&v())}),!1),e="ready",p||parent.postMessage("info|"+e,s),m(),u)&&(document.getElementById("webauthn-header").innerText=decodeURI(u));if(d){var t=document.getElementById("webauthn-button");t.innerText=decodeURI(d),t.onclick=h}}))},165:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.b64Decode=t.getQsParam=void 0,t.getQsParam=function(e){var t=window.location.href;e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},t.b64Decode=function(e){return decodeURIComponent(Array.prototype.map.call(atob(e),(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}},433:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)&&(e=Uint8Array.from(e)),e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array){for(var t="",n=e.byteLength,r=0;r<n;r++)t+=String.fromCharCode(e[r]);e=window.btoa(t)}if("string"!=typeof e)throw new Error("could not coerce to string");return e=e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=*$/g,"")}Object.defineProperty(t,"__esModule",{value:!0}),t.parseWebauthnJson=t.buildDataString=void 0,t.buildDataString=function(e){var t=e.response,n=new Uint8Array(t.authenticatorData),a=new Uint8Array(t.clientDataJSON),o=new Uint8Array(e.rawId),i=new Uint8Array(t.signature),c={id:e.id,rawId:r(o),type:e.type,extensions:e.getClientExtensionResults(),response:{authenticatorData:r(n),clientDataJson:r(a),signature:r(i)}};return JSON.stringify(c)},t.parseWebauthnJson=function(e){var t=JSON.parse(e),n=t.challenge.replace(/-/g,"+").replace(/_/g,"/");return t.challenge=Uint8Array.from(atob(n),(function(e){return e.charCodeAt(0)})),t.allowCredentials.forEach((function(e){var t=e.id.replace(/\_/g,"/").replace(/\-/g,"+");e.id=Uint8Array.from(atob(t),(function(e){return e.charCodeAt(0)}))})),t}},434:function(e,t,n){"use strict";n.r(t)}});
//# sourceMappingURL=webauthn.8e5494e39b48bad5e654.js.map